(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"8d44":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:"",cla:""}},[n("BannerPages",{staticClass:"q-mb-md",attrs:{bannerUrl:"ImageJobs.png",pageName:e.$t("joins"),companyName:e.company.denomination}}),n("div",{staticClass:"constrain column"},[n("PageDescription",{key:e.descriptionKey,staticClass:"col",attrs:{descriptionProp:e.pageDescription,category:"jobs"},on:{description:e.updatePageDescription}}),e.isAdmin?n("AddElementBtn",{staticClass:"col",attrs:{link:"newJob"},on:{statusFilter:e.filterJobs,searchPatern:e.filterJobs}}):e._e(),e.renderComponent?n("JobsComponent",{key:e.myKey,staticClass:"col card_jobs",attrs:{propJobs:e.filteredJobs}}):e._e()],1)],1)},o=[],i=(n("4de4"),n("c975"),n("448a")),s=n.n(i),a=n("ded3"),c=n.n(a),u=(n("96cf"),n("c973")),l=n.n(u),d=n("98d1"),p=n("982c"),b=n("f3bc"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.renderContent?n("div",[e.localJobs&&e.localJobs.length>0?n("div",{staticClass:"q-pa-md row items-center q-gutter-md justify-center"},e._l(e.localJobs,(function(e){return n("div",{staticClass:"col-12"},[n("JobComponent",{staticClass:"text-center",attrs:{jobProp:e}})],1)})),0):n("div",[n("EmptyComponent",{attrs:{message:"emptyJobs"}})],1)]):e._e()},f=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("q-card",{staticClass:"my-card "},[n("q-card-section",{staticClass:"bg-primary text-white text-left text-h6"},[n("span",{staticClass:"text-bold q-pl-md "},[e._v(e._s(e.jobProp.denomination.toUpperCase()))]),e._v("  REF-"+e._s(e.jobProp.job_cod.toUpperCase())+"\n    ")]),n("q-card-actions",{staticClass:"column justify-between"},[n("div",{staticClass:"col  q-pa-md self-start",domProps:{innerHTML:e._s(e.jobProp.description)}}),n("div",{staticClass:"col  q-pa-md self-end"},[n("q-btn",{staticClass:"bg_sysait_cerulean text-white dense  ",attrs:{"no-caps":"",label:e.$t("consultJob")},on:{click:function(t){return e.redirect("job",e.jobProp.id)}}})],1)]),n("q-separator",{attrs:{color:"primary",size:"5px"}}),e.isAdmin?n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{label:e.status,outline:"",color:"red",dense:"",color:e.color,padding:"sm"}}),n("q-btn",{attrs:{outline:"",color:"primary",round:"",dense:"",icon:"fa fa-pen",padding:"sm"},on:{click:function(t){return e.redirect("editJob",e.jobProp.id)}}}),n("q-btn",{attrs:{outline:"",color:"primary",round:"",dense:"",icon:"fa fa-trash",padding:"sm"},on:{click:function(t){return e.deleteJob()}}})],1):e._e()],1)],1)},v=[],g=(n("7db0"),n("8654")),w=n("2f62"),j=n("e1cc"),y=n("e994"),C=(n("bc3a"),{name:"Job",props:["jobProp"],watch:{currentUser:{immediate:!0,handler:function(){this.userChanged()}}},data:function(){return{imKey:0,status:null,color:null,isAdmin:!1}},computed:c()({},Object(w["c"])(["currentUser"])),mounted:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.status=null===(n=j["b"].STATUS.find((function(t){return t.value==e.jobProp.status})))||void 0===n?void 0:n.label,e.color=null===(r=j["b"].STATUS.find((function(t){return t.value==e.jobProp.status})))||void 0===r?void 0:r.color;case 2:case"end":return t.stop()}}),t)})))()},methods:{userChanged:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["e"])();case 2:e.isAdmin=t.sent;case 3:case"end":return t.stop()}}),t)})))()},openPage:function(e){window.open(e,"_blank")},deleteJob:function(){var e=this;this.$q.dialog({title:"Confirmazione",message:"Are you sure you want to delete ".concat(this.jobProp.denomination.toUpperCase()," ? This action wil permanently delete this post from DATABASE. You may edit and change status to delete to maintaint the post in the DB"),cancel:!0,persistent:!0,color:"red",ok:"delete"}).onOk(l()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["a"])(null===(n=e.jobProp)||void 0===n?void 0:n.id);case 2:e.$store.dispatch("wilfried/removeJob",e.jobProp);case 3:case"end":return t.stop()}}),t)}))))},redirect:function(e,t){this.$router.push({name:e,params:{job_id:t}})}}}),J=C,x=n("2877"),P=n("f09f"),k=n("a370"),_=n("4b7e"),q=n("9c40"),R=n("eb85"),D=n("eebe"),A=n.n(D),$=Object(x["a"])(J,h,v,!1,null,null,null),O=$.exports;A()($,"components",{QCard:P["a"],QCardSection:k["a"],QCardActions:_["a"],QBtn:q["a"],QSeparator:R["a"]});var K={name:"JobsComponent",props:["propJobs"],components:{JobComponent:O,EmptyComponent:p["a"]},data:function(){return{localJobs:null,renderContent:!1}},created:function(){this.filterJobs()},methods:{filterJobs:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["e"])();case 2:if(!t.sent){t.next=6;break}t.t0=e.propJobs,t.next=7;break;case 6:t.t0=null===(n=e.propJobs)||void 0===n?void 0:n.filter((function(e){return"4"==e.status}));case 7:e.localJobs=t.t0,e.renderContent=!0;case 9:case"end":return t.stop()}}),t)})))()}}},E=K,U=Object(x["a"])(E,m,f,!1,null,null,null),S=U.exports,B=n("4306"),T=n("a2d9"),Q={name:"Jobs",components:{BannerPages:d["a"],EmptyComponent:p["a"],PageDescription:b["a"],JobsComponent:S,AddElementBtn:B["a"]},watch:{currentUser:{immediate:!0,handler:function(){this.userChanged()}},jobs:{immediate:!0,handler:function(){this.jobsChanged()}}},data:function(){return{renderComponent:!1,jobs:[],pageDescription:null,descriptionKey:4,myKey:45,filteredJobs:[],model:null,isAdmin:!1}},mounted:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e["wilfried/jobsPageDescription"]){t.next=3;break}return t.next=3,e.getPageDescription();case 3:if(e["wilfried/jobs"]){t.next=6;break}return t.next=6,e.getJobs();case 6:e.jobs=e["wilfried/jobs"],e.pageDescription=e["wilfried/jobsPageDescription"],e.jobs&&e.filterJobs([]),e.renderComponent=!0;case 10:case"end":return t.stop()}}),t)})))()},computed:c()({},Object(w["c"])(["company","wilfried/jobs","wilfried/jobsPageDescription","currentUser"])),methods:{userChanged:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["e"])();case 2:e.isAdmin=t.sent,e.myKey++;case 4:case"end":return t.stop()}}),t)})))()},jobsChanged:function(){this.jobs=this["wilfried/jobs"],this.filterJobs(this.model)},updatePageDescription:function(e){var t=this;return l()(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(T["a"])(e);case 2:r=n.sent,r&&(t.pageDescription=r,t.descriptionKey++);case 4:case"end":return n.stop()}}),n)})))()},getPageDescription:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.prev=1,t.next=4,Object(T["b"])("jobs");case 4:n=t.sent,e.pageDescription=null===n||void 0===n?void 0:n.data,e.$store.dispatch("wilfried/setJobsPageDescription",c()({},null===n||void 0===n?void 0:n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.pageDescription=null;case 12:return t.prev=12,e.$q.loading.hide(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},getJobs:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.prev=1,t.next=4,Object(y["b"])();case 4:n=t.sent,e.$store.dispatch("wilfried/setJobs",null===n||void 0===n?void 0:n.data),e.myKey=!e.myKey,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),netWorkError(e.$t("netWorkErrorMSG")+" "+t.t0),e.$router.push({name:e.previousRoute});case 13:return t.prev=13,e.$q.loading.hide(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})))()},filterJobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||!this.jobs)return this.filteredJobs=this.jobs,void(this.myKey=!this.myKey);var t=Array.isArray(e);this.model=e;var n,r=s()(this.jobs);if(t&&(null===e||void 0===e?void 0:e.length)>0)r=null===(n=r)||void 0===n?void 0:n.filter((function(t){return e.indexOf(parseInt(t.status))>-1}));else if(!t&&(null===e||void 0===e?void 0:e.length)>0){var o,i,a=null!==(o=e.toLowerCase())&&void 0!==o?o:"";r=null===(i=r)||void 0===i?void 0:i.filter((function(e){var t;return(null===(t=e.job_cod)||void 0===t?void 0:t.toLowerCase().indexOf(a))>-1}))}this.filteredJobs=r,this.myKey=!this.myKey}}},L=Q,z=(n("bdbb"),n("9989")),F=Object(x["a"])(L,r,o,!1,null,null,null);t["default"]=F.exports;A()(F,"components",{QPage:z["a"]})},a90c:function(e,t,n){},bdbb:function(e,t,n){"use strict";n("a90c")}}]);