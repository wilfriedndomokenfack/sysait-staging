(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"18c5":function(n,t,e){},"4d76":function(n,t,e){"use strict";e("18c5")},f397:function(n,t,e){"use strict";e.r(t);var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("q-page",{attrs:{padding:""}},[e("BannerPages",{staticClass:"q-mb-md",attrs:{bannerUrl:"ImageTraining.png",pageName:n.$t("courses"),companyName:n.company.denomination}}),e("div",{staticClass:"constrain"},[e("PageDescription",{key:n.descriptionKey,attrs:{descriptionProp:n.pageDescription,category:"trainings"},on:{description:n.updatePageDescription}}),e("div",{staticClass:"col-12"},[e("SendUserFromTrainingsToContacts",{key:n.myKeyTraining,on:{formcontact:n.emitcontactform}})],1),e("div",[e("AddElementBtn",{attrs:{link:"newTraining"},on:{statusFilter:n.filterTrainings}})],1),n.renderComponent?e("div",[e("TrainingsComponent",{key:n.myKey,attrs:{propTrainings:n.filteredTrainings}})],1):n._e(),e("div",{staticClass:"col-12"},[e("SendUserFromTrainingsToContacts",{key:n.myKeyTraining,on:{formcontact:n.emitcontactform}})],1),n.confirmMessage?e("ConfirmationContactComponent",{key:n.myKeyTraining,attrs:{propTitle:n.$t("confirm"),propMessage:n.confirmMessage}}):n._e()],1)],1)},i=[],a=(e("4de4"),e("c975"),e("96cf"),e("c973")),o=e.n(a),s=e("ded3"),c=e.n(s),u=e("98d1"),l=e("982c"),p=function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.renderContent?e("div",[n.localTrainings.length>0?e("div",{staticClass:"q-pa-md row items-start q-gutter-md justify-between"},n._l(n.localTrainings,(function(n,t){return e("div",{key:t},[e("TrainingComponent",{attrs:{trainingProp:n}})],1)})),0):e("div",[e("EmptyComponent",{attrs:{message:"emptyCourse"}})],1)]):n._e()},d=[],g=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("q-card",{staticClass:"my-card card1",class:{good:!n.$q.platform.is.desktop}},[e("q-card-section",{staticClass:"bg-primary text-white"},["en-us"==n.$i18n.locale?e("div",{staticClass:"text-h6"},[e("strong",[n._v(n._s(n.trainingProp.denomination.toUpperCase()))]),n._v("\n        "+n._s(n.$t("trainningCourse").toUpperCase())+"\n      ")]):e("div",{staticClass:"text-h6"},[n._v("\n        "+n._s(n.$t("trainningCourse").toUpperCase())+"\n        "),e("strong",[n._v(n._s(n.trainingProp.denomination.toUpperCase()))])])]),e("q-card-actions",{staticClass:"row items-end justify-between"},[e("div",{staticClass:"col-11"},[e("div",{domProps:{innerHTML:n._s(n.trainingProp.description)}}),n.trainingProp.link_course&&(n.isEnrollToTraining(n.trainingProp.id)||n.isAdmin)?e("div",[e("q-btn",{attrs:{label:n.$t("takeCourse"),outline:"",color:"primary",dense:"",padding:"sm"},on:{click:function(t){return n.openPage(n.trainingProp.link_course)}}})],1):n._e()]),e("div",{key:n.imKey,staticClass:"col-1"},[n.googImg?e("img",{staticStyle:{width:"100%"},attrs:{alt:"IMG",src:"training_img/"+n.trainingProp.image_path}}):e("img",{staticStyle:{width:"100%"},attrs:{alt:"IMG",src:"training_img/code.png"}})])]),e("q-separator",{attrs:{color:"primary",size:"5px"}}),n.isAdmin?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:n.status,outline:"",color:"red",dense:"",color:n.color,padding:"sm"}}),e("q-btn",{attrs:{outline:"",color:"primary",round:"",dense:"",icon:"fa fa-pen",padding:"sm"},on:{click:function(t){return n.redirect("editTraining",n.trainingProp.id)}}}),e("q-btn",{attrs:{outline:"",color:"primary",round:"",dense:"",icon:"fa fa-trash",padding:"sm"},on:{click:function(t){return n.deleteTraining()}}})],1):n._e()],1)],1)},m=[],f=(e("99af"),e("7db0"),e("2f62")),h=e("e1cc"),v=e("4eea"),y=e("8654"),C=e("bc3a"),T=e.n(C),w={name:"Training",props:["trainingProp"],data:function(){return{imKey:0,googImg:!1,status:null,color:null,isAdmin:!1}},computed:c()({},Object(f["c"])(["currentUser"])),mounted:function(){var n=this;return o()(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["e"])();case 2:return n.isAdmin=t.sent,t.next=5,n.getLogoUrl(n.trainingProp.image_path);case 5:n.googImg=t.sent,n.status=null===(e=h["b"].STATUS.find((function(t){return t.value==n.trainingProp.status})))||void 0===e?void 0:e.label,n.color=null===(r=h["b"].STATUS.find((function(t){return t.value==n.trainingProp.status})))||void 0===r?void 0:r.color;case 8:case"end":return t.stop()}}),t)})))()},methods:{isEnrollToTraining:y["d"],openPage:function(n){window.open(n,"_blank")},getLogoUrl:function(n){return o()(regeneratorRuntime.mark((function t(){var e,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=!1,r="".concat(window.location.origin,"/training_img/").concat(n),t.prev=2,a=null,!n){t.next=8;break}return t.next=7,T.a.get(r);case 7:a=t.sent;case 8:200==(null===(i=a)||void 0===i?void 0:i.status)&&(e=!0),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e=!1;case 14:return t.abrupt("return",e);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},deleteTraining:function(){var n=this;this.$q.dialog({title:"Confirmazione",message:"Are you sure you want to delete ".concat(this.trainingProp.denomination.toUpperCase()," ").concat(this.$t("trainningCourse").toUpperCase()," ? This action wil permanently delete this post from DATABASE. You may edit and change status to delete to maintaint the post in the DB"),cancel:!0,persistent:!0,color:"red",ok:"delete"}).onOk((function(){var t;Object(v["b"])(null===(t=n.trainingProp)||void 0===t?void 0:t.id),n.$store.dispatch("wilfried/removeTraining",n.trainingProp)}))},redirect:function(n,t){this.$router.push({name:n,params:{training_id:t}})}}},b=w,k=(e("4d76"),e("2877")),x=e("f09f"),P=e("a370"),_=e("4b7e"),$=e("9c40"),q=e("eb85"),K=e("eebe"),U=e.n(K),D=Object(k["a"])(b,g,m,!1,null,"7807954a",null),j=D.exports;U()(D,"components",{QCard:x["a"],QCardSection:P["a"],QCardActions:_["a"],QBtn:$["a"],QSeparator:q["a"]});var O={name:"TrainingsComponent",props:["propTrainings"],components:{TrainingComponent:j,EmptyComponent:l["a"]},data:function(){return{localTrainings:[],renderContent:!1}},created:function(){this.filterTrainings()},methods:{filterTrainings:function(){var n=this;return o()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["e"])();case 2:if(!t.sent){t.next=6;break}t.t0=n.propTrainings,t.next=7;break;case 6:t.t0=null===(e=n.propTrainings)||void 0===e?void 0:e.filter((function(n){return"4"==n.status}));case 7:n.localTrainings=t.t0,n.renderContent=!0;case 9:case"end":return t.stop()}}),t)})))()}}},R=O,S=Object(k["a"])(R,p,d,!1,null,null,null),A=S.exports,E=e("f3bc"),F=e("4306"),M=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("p",{staticClass:"q-pt-lg text-center"},[n._v("\n    "+n._s(n.$t("trainingContact"))+"\n\n    "),e("q-btn",{staticClass:"text-primary text-bold",attrs:{"no-caps":"",flat:"",dense:""},on:{click:function(t){return n.toggleComponent()}}},[n._v("\n      "+n._s(n.$t("contacts"))+"\n    ")]),n.show?e("PopupContactFormComponent",{key:n.termsKey,attrs:{originFormParent:"Training",titlePopup:"apply_training"},on:{formcontact:n.emitcontactform}}):n._e()],1)])},B=[],I=e("ee84"),Q={name:"SendUserFromTrainingToConntacts",components:{PopupContactFormComponent:I["a"]},data:function(){return{show:!1,termsKey:1}},methods:{toggleComponent:function(){this.termsKey++,this.show=!0},emitcontactform:function(n){this.$emit("formcontact",n)}}},G=Q,L=Object(k["a"])(G,M,B,!1,null,null,null),z=L.exports;U()(L,"components",{QBtn:$["a"]});var J=e("13b4"),N=e("29a4"),H=e("7580"),W=e("a2d9"),Y=e("2919"),V={name:"TrainingsPage",components:{BannerPages:u["a"],EmptyComponent:l["a"],TrainingsComponent:A,PageDescription:E["a"],AddElementBtn:F["a"],SendUserFromTrainingsToContacts:z,ContactFormComponent:J["a"],PopupContactFormComponent:I["a"],ConfirmationContactComponent:H["a"]},watch:{currentUser:{immediate:!0,handler:function(){this.myKey=!this.myKey}},trainings:{immediate:!0,handler:function(){this.trainingsChanged()}}},data:function(){return{renderComponent:!1,trainings:null,pageDescription:"",descriptionKey:12,myKey:0,editDescription:!1,filteredTrainings:[],model:null,confirmMessage:null,myKeyTraining:0}},computed:c()({},Object(f["c"])(["company","wilfried/trainings","wilfried/trainingPageDescription","currentUser"])),mounted:function(){var n=this;return o()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.currentUser||null!==(e=n.currentUser)&&void 0!==e&&e.coursesIds){t.next=3;break}return t.next=3,Object(y["b"])(n.currentUser.id);case 3:if(n["wilfried/training"]){t.next=6;break}return t.next=6,n.getTrainings();case 6:if(n["wilfried/trainingPageDescription"]){t.next=9;break}return t.next=9,n.getPageDescription();case 9:n.pageDescription=n["wilfried/trainingPageDescription"],n.trainings=n["wilfried/trainings"],n.filterTrainings([]),n.renderComponent=!0;case 13:case"end":return t.stop()}}),t)})))()},methods:{emitcontactform:function(n){var t=this;return o()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(N["a"])(n);case 2:t.confirmMessage=e.sent,t.myKeyTraining++;case 4:case"end":return e.stop()}}),e)})))()},trainingsChanged:function(){this.trainings=this["wilfried/trainings"],this.filterTrainings(this.model)},updatePageDescription:function(n){var t=this;return o()(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(W["a"])(n);case 2:r=e.sent,r&&(t.pageDescription=r,t.descriptionKey++);case 4:case"end":return e.stop()}}),e)})))()},getTrainings:function(){var n=this;return o()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.$q.loading.show(),t.prev=1,t.next=4,Object(v["e"])();case 4:e=t.sent,n.$store.dispatch("wilfried/setTrainings",null===e||void 0===e?void 0:e.data),n.myKey=!n.myKey,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),Object(Y["a"])(n.$t("netWorkErrorMSG")+" "+t.t0),n.$router.push({name:n.previousRoute});case 13:return t.prev=13,n.$q.loading.hide(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})))()},getPageDescription:function(){var n=this;return o()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.$q.loading.show(),t.prev=1,t.next=4,Object(W["b"])("trainings");case 4:e=t.sent,n.pageDescription=null===e||void 0===e?void 0:e.data,n.$store.dispatch("wilfried/setTrainingPageDescription",c()({},null===e||void 0===e?void 0:e.data)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),n.pageDescription=null;case 12:return t.prev=12,n.$q.loading.hide(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},redirect:function(n,t){this.$router.push({name:n,params:t})},filterTrainings:function(){var n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(this.model=t,(null===t||void 0===t?void 0:t.length)>0)?this.filteredTrainings=null===(n=this.trainings)||void 0===n?void 0:n.filter((function(n){return t.indexOf(parseInt(n.status))>-1})):this.filteredTrainings=this.trainings;this.myKey=!this.myKey}}},X=V,Z=e("9989"),nn=Object(k["a"])(X,r,i,!1,null,"eeaf2b6e",null);t["default"]=nn.exports;U()(nn,"components",{QPage:Z["a"]})}}]);